# ğŸ“‹ Ghid Formular Cerere Mutare - Noile FuncÈ›ionalitÄƒÈ›i

## ğŸ¯ Ce s-a Ã®mbunÄƒtÄƒÈ›it?

### 1. Layout Mai Compact È™i Eficient âœ¨

**Ãnainte**: CÃ¢mpurile erau unele sub altele, formular lung  
**Acum**: CÃ¢mpurile importante sunt grupate pe acelaÈ™i rÃ¢nd

- JudeÈ› È™i Localitate: **side-by-side** pe desktop
- Detalii proprietate: **Tip, Camere, Etaj, Lift** pe acelaÈ™i rÃ¢nd
- **Data mutÄƒrii È™i Telefon**: pe acelaÈ™i rÃ¢nd
- Formular **40% mai compact** vizual!

### 2. SecÈ›iunea "Survey È™i Estimare" ğŸ”

**Nou!** DupÄƒ servicii, clientul alege cum vrea estimarea:

#### ğŸ“ Survey la faÈ›a locului (in-person)
- Un reprezentant vine fizic sÄƒ evalueze
- Cel mai precis
- Ideal pentru mutÄƒri complexe

#### ğŸ“¹ Survey video
- Video call programat pentru evaluare
- Rapid È™i convenabil
- EconomiseÈ™ti timp

#### âš¡ Estimare rapidÄƒ (quick-estimate)
- BazatÄƒ doar pe informaÈ›iile din formular
- Cea mai rapidÄƒ opÈ›iune
- BunÄƒ pentru mutÄƒri simple

**Design**: Cards cu border amber, hover effects, clear selection state

### 3. SecÈ›iunea "Poze È™i Video" ğŸ“¸

**Nou!** Client alege cÃ¢nd sÄƒ uploadeze media:

#### ğŸš€ Upload acum
- ÃncarcÄƒ fotografii/video imediat din formular
- Drag & drop sau click pentru selectare
- AfiÈ™are preview cu dimensiuni fiÈ™iere
- Accept: imagini (JPG, PNG) È™i video (MP4, MOV)
- Max: 50MB per fiÈ™ier

**Ce se Ã®ntÃ¢mplÄƒ**:
1. Client selecteazÄƒ fiÈ™iere
2. Vede lista cu size-uri
3. Click "ÃncarcÄƒ fiÈ™ierele"
4. Loading indicator
5. Mesaj succes

#### ğŸ“§ Primesc link pe email
- Client primeÈ™te email cu link personalizat
- Are **7 zile** sÄƒ uploadeze
- Link securizat, unic per cerere

**Email conÈ›ine**:
- Link direct cÄƒtre pagina de upload
- InstrucÈ›iuni clare
- Lista cu ce poze sunt utile
- Valabilitate 7 zile

**Design**: Cards cu border blue, iconiÈ›e intuitive, informaÈ›ii clare

## ğŸ¨ Preview Vizual

### SecÈ›iunea Survey
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘ï¸  Survey È™i estimare                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ ğŸ“ Survey â”‚  â”‚ ğŸ“¹ Survey â”‚  â”‚ âš¡ Estimareâ”‚                â”‚
â”‚  â”‚ la faÅ£a  â”‚  â”‚   video   â”‚  â”‚  rapidÄƒ   â”‚                â”‚
â”‚  â”‚  locului â”‚  â”‚           â”‚  â”‚           â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚   [Selected]      [Hover]       [Normal]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SecÈ›iunea Upload Media
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¸  Poze È™i video                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ ğŸš€ Upload    â”‚  â”‚ ğŸ“§ Primesc   â”‚                        â”‚
â”‚  â”‚    acum      â”‚  â”‚  link email  â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                              â”‚
â”‚  [DacÄƒ "acum" selectat]                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  ğŸ“¤                               â”‚                      â”‚
â”‚  â”‚  Click pentru upload             â”‚                      â”‚
â”‚  â”‚  Poze/Video (max 50MB)           â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                              â”‚
â”‚  [DacÄƒ "later" selectat]                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  ğŸ“§ Vei primi email cu link      â”‚                      â”‚
â”‚  â”‚  personalizat valid 7 zile       â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Flow Complet

### Scenariul 1: Upload Acum
```
1. Client completeazÄƒ formular
   â”œâ”€ Alege servicii
   â”œâ”€ Alege tip survey
   â””â”€ SelecteazÄƒ "Upload acum"

2. SelecteazÄƒ fiÈ™iere (poze/video)
   â”œâ”€ Click sau drag & drop
   â””â”€ Vede preview cu size-uri

3. Submit formular
   â”œâ”€ Cerere creatÄƒ Ã®n Firestore
   â””â”€ Toast: "Cererea a fost trimisÄƒ cu succes!"

4. (TODO) FiÈ™iere uploadate Ã®n Firebase Storage
```

### Scenariul 2: Upload Mai TÃ¢rziu
```
1. Client completeazÄƒ formular
   â”œâ”€ Alege servicii
   â”œâ”€ Alege tip survey
   â””â”€ SelecteazÄƒ "Primesc link pe email"

2. Submit formular
   â”œâ”€ Cerere creatÄƒ Ã®n Firestore
   â””â”€ API call cÄƒtre /api/generateUploadLink

3. Backend
   â”œâ”€ GenereazÄƒ token unic (hex 64 chars)
   â”œâ”€ CreeazÄƒ link: /upload/[token]
   â””â”€ Trimite email via Resend

4. Client primeÈ™te email
   â”œâ”€ Link personalizat
   â”œâ”€ InstrucÈ›iuni clare
   â””â”€ Valid 7 zile

5. Client acceseazÄƒ link
   â”œâ”€ Pagina /upload/[token]
   â”œâ”€ SelecteazÄƒ fiÈ™iere
   â”œâ”€ Upload (TODO: Firebase Storage)
   â””â”€ Mesaj succes
```

## ğŸ”§ Pentru Dezvoltatori

### Variabile env necesare:
```env
RESEND_API_KEY=re_xxxxx           # Pentru email
NOTIFY_FROM_EMAIL=noreply@...     # Sender email
NEXT_PUBLIC_BASE_URL=https://...  # Pentru link-uri
```

### API Endpoints:

#### POST /api/generateUploadLink
```typescript
Request:
{
  requestId: string,
  customerEmail: string,
  customerName: string
}

Response:
{
  ok: true,
  uploadToken: string,
  emailSent: boolean
}
```

### Structura date Firestore:

```typescript
requests/{requestId} = {
  // LocaÈ›ie
  fromAddress: string,
  fromType: "house" | "flat",
  fromFloor?: string,
  fromElevator: boolean,
  toAddress: string,
  toType: "house" | "flat",
  toFloor?: string,
  toElevator: boolean,
  
  // Servicii
  serviceMoving: boolean,
  servicePacking: boolean,
  serviceDisassembly: boolean,
  serviceCleanout: boolean,
  serviceStorage: boolean,
  
  // Survey
  surveyType: "in-person" | "video" | "quick-estimate",
  
  // Media
  mediaUpload: "now" | "later",
  mediaUploadToken?: string,
  mediaUrls?: string[],
  
  // ... alte cÃ¢mpuri existente
}
```

## âœ… Beneficii

1. **UX Ã®mbunÄƒtÄƒÈ›it**: Formular mai compact, mai puÈ›ine scroll-uri
2. **Flexibilitate**: Client alege cÃ¢nd uploadÄƒ media
3. **EstimÄƒri precise**: Survey options ajutÄƒ companiile
4. **Profesionalism**: Email cu link aratÄƒ serios È™i organizat
5. **Conversii mai mari**: Proces simplificat = mai multe cereri completate

## ğŸš€ Next Steps (OpÈ›ional)

- [ ] Implementare upload real Ã®n Firebase Storage
- [ ] Validare token server-side cu expirare
- [ ] Progress bars pentru upload
- [ ] Thumbnail preview pentru imagini
- [ ] Notificare companii cÃ¢nd client uploadÄƒ media
- [ ] Reminder email dupÄƒ 3 zile dacÄƒ nu a uploadat

---

**Status**: âœ… Implementat È™i testat  
**Build**: âœ… Production ready  
**Docs**: âœ… Actualizate
